# ZeroMQ
## 同步方式處裡通訊

```python
#zmq_server.py

import zmq

host = '127.0.0.1'
port = 6789
# 保存狀態
context = zmq.Context()
server = context.socket(zmq.REP)
server.bind("tcp://%s:%s" % (host, port))

while True:
    # Wait for next request from client
    request_bytes = server.recv()
    request_str = request_bytes.decode('utf-8')
    print("That voice in my head says: %s" % request_str)
    reply_str = "Stop saying %s" % request_str
    reply_bytes = bytes(reply_str, "utf-8")
    server.send(reply_bytes)
```
```python
#zmq_client.py

import zmq
host = '127.0.0.1'
port = 6789
context = zmq.Context()
client = context.socket(zmq.REQ)
client.connect("tcp://%s:%s" % (host, port))
for num in range(1,6):
    request_str="message #%s"%num
    request_bytes=request_str.encode('utf-8')
    client.send(request_bytes)
    reply_bytes=client.recv()
    reply_str=reply_bytes.decode('utf-8')
    print('Sent %s,received %s'%(request_str,reply_str))